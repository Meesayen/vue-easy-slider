!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["vue-easy-slider"]={},t.Vue)}(this,(function(t,e){"use strict";function i(t,e){let i=!1;return function(){i||(i=!0,t.apply(this,arguments),setTimeout((()=>i=!1),e))}}function n(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function s(t,e){var i=function(t,e){var i=n(t)*n(e);if(0===i)return 0;var s=function(t,e){return t.x*e.x+t.y*e.y}(t,e)/i;return s>1&&(s=1),Math.acos(s)}(t,e);return function(t,e){return t.x*e.y-e.x*t.y}(t,e)>0&&(i*=-1),180*i/Math.PI}var o=function(t){this.handlers=[],this.el=t};function l(t,e){var i=new o(t);return i.add(e),i}o.prototype.add=function(t){this.handlers.push(t)},o.prototype.del=function(t){t||(this.handlers=[]);for(var e=this.handlers.length;e>=0;e--)this.handlers[e]===t&&this.handlers.splice(e,1)},o.prototype.dispatch=function(){for(var t=0,e=this.handlers.length;t<e;t++){var i=this.handlers[t];"function"==typeof i&&i.apply(this.el,arguments)}};var a=function(t,e){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var i=function(){};this.rotate=l(this.element,e.rotate||i),this.touchStart=l(this.element,e.touchStart||i),this.multipointStart=l(this.element,e.multipointStart||i),this.multipointEnd=l(this.element,e.multipointEnd||i),this.pinch=l(this.element,e.pinch||i),this.swipe=l(this.element,e.swipe||i),this.tap=l(this.element,e.tap||i),this.doubleTap=l(this.element,e.doubleTap||i),this.longTap=l(this.element,e.longTap||i),this.singleTap=l(this.element,e.singleTap||i),this.pressMove=l(this.element,e.pressMove||i),this.twoFingerPressMove=l(this.element,e.twoFingerPressMove||i),this.touchMove=l(this.element,e.touchMove||i),this.touchEnd=l(this.element,e.touchEnd||i),this.touchCancel=l(this.element,e.touchCancel||i),this._cancelAllHandler=this.cancelAll.bind(this),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};a.prototype={start:function(t){if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30,this.isDoubleTap&&clearTimeout(this.singleTapTimeout)),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var e=this.preV;if(t.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var i={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};e.x=i.x,e.y=i.y,this.pinchStartLen=n(e),this.multipointStart.dispatch(t,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t,this.element),this._preventTap=!0}.bind(this),750)}},move:function(t){if(t.touches){var e=this.preV,i=t.touches.length,o=t.touches[0].pageX,l=t.touches[0].pageY;if(this.isDoubleTap=!1,i>1){var a=t.touches[1].pageX,h=t.touches[1].pageY,r={x:t.touches[1].pageX-o,y:t.touches[1].pageY-l};null!==e.x&&(this.pinchStartLen>0&&(t.zoom=n(r)/this.pinchStartLen,this.pinch.dispatch(t,this.element)),t.angle=s(r,e),this.rotate.dispatch(t,this.element)),e.x=r.x,e.y=r.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(o-this.x2+a-this.sx2)/2,t.deltaY=(l-this.y2+h-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t,this.element),this.sx2=a,this.sy2=h}else{if(null!==this.x2){t.deltaX=o-this.x2,t.deltaY=l-this.y2;var c=Math.abs(this.x1-this.x2),d=Math.abs(this.y1-this.y2);(c>10||d>10)&&(this._preventTap=!0)}else t.deltaX=0,t.deltaY=0;this.pressMove.dispatch(t,this.element)}this.touchMove.dispatch(t,this.element),this._cancelLongTap(),this.x2=o,this.y2=l,i>1&&t.preventDefault()}},end:function(t){if(t.changedTouches){this._cancelLongTap();var e=this;t.touches.length<2&&(this.multipointEnd.dispatch(t,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){e.swipe.dispatch(t,e.element)}),0)):(this.tapTimeout=setTimeout((function(){e._preventTap||e.tap.dispatch(t,e.element),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.element),e.isDoubleTap=!1)}),0),e.isDoubleTap||(e.singleTapTimeout=setTimeout((function(){e.singleTap.dispatch(t,e.element)}),250))),this.touchEnd.dispatch(t,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,window.removeEventListener("scroll",this._cancelAllHandler),null}};const h={name:"Slider",model:{prop:"value",event:"change"},props:{value:{type:Number,default:0},width:{type:String,default:"auto"},height:{type:String,default:"300px"},touch:{type:Boolean,default:!0},animation:{type:String,default:"normal"},autoplay:{type:Boolean,default:!0},stopOnHover:{type:Boolean,default:!1},interval:{type:Number,default:3e3},speed:{type:Number,default:500},indicators:{type:[String,Boolean],default:"center"},controlBtn:{type:Boolean,default:!0},beforePrevious:{type:Function,default:()=>!0},beforeNext:{type:Function,default:()=>!0},prevBtnLabel:{type:String,default:"Previous slide"},nextBtnLabel:{type:String,default:"Next slide"}},emits:["change","next","previous"],setup(t,{emit:n}){const s=e.ref(null),o=e.reactive({sliderItems:[],currentIndex:0,timer:0,af:null,isStopped:!1});function l(){o.sliderItems[t.value]&&(o.currentIndex=t.value);const e=o.sliderItems[o.currentIndex];e&&(e.init(),T())}const h=(r=l,c=100,p=null,function(){var t=this,e=arguments,i=+new Date;clearTimeout(p),u||(u=i),i-u>=d?(r.apply(t,e),u=i):p=setTimeout((()=>{r.apply(t,e)}),c)});var r,c,d,u,p;const m={register(t){o.sliderItems.push(t),h()},deregister(t){o.sliderItems=o.sliderItems.filter((e=>e!==t)),h()},speed:e.computed((()=>t.speed)),animation:e.computed((()=>t.animation))};e.provide("slider-api",m);const f=e.computed((()=>o.sliderItems.length>1));const v=i((function(t){if(!t||!f.value)return;const e=t>0,i=b(t),s=o.sliderItems[o.currentIndex],l=o.sliderItems[i];s.hide(e),l.show(e),o.currentIndex=i,n("change",i)}),t.speed-200);function T(){t.autoplay&&!o.isStopped&&(o.timer&&clearInterval(o.timer),o.timer=setInterval((()=>{v(1)}),t.interval))}function y(){t.beforePrevious()&&I("previous")}function g(){t.beforeNext()&&I("next")}function x(t){t&&f.value&&(v(t),T())}function b(t){const e=o.sliderItems.length;return o.sliderItems[o.currentIndex]||(o.currentIndex=e-1),(o.currentIndex+t+e)%e}function I(t){if(!f.value)return;const e="next"===t?1:-1,i=b(e);n(t,{original:o.currentIndex,next:i}),v(e),T()}const w=i((t=>{const e=t-o.currentIndex;!e||t<0||t>o.sliderItems.length-1||x(e)}),100);return e.watch((()=>t.value),w),e.watch((()=>s.value),(e=>{!function(e){!o.af&&t.touch&&e&&(o.af=new a(e,{swipe:t=>{"Left"===t.direction?g():y()}}))}(e)}),{immediate:!0}),e.onMounted((()=>{l()})),e.onActivated((()=>{l()})),e.onBeforeUnmount((()=>{o.timer&&clearInterval(o.timer),o.af&&o.af.destroy()})),e.onDeactivated((()=>{o.timer&&clearInterval(o.timer),o.af&&o.af.destroy(),o.af=null})),{touchAreaRef:s,handleMouseenter:function(){t.autoplay&&t.stopOnHover&&(o.isStopped=!0,o.timer&&clearInterval(o.timer))},handleMouseleave:function(){t.autoplay&&t.stopOnHover&&(o.isStopped=!1,T())},sliderItems:e.computed((()=>o.sliderItems)),currentIndex:e.computed((()=>o.currentIndex)),handleIndicator:x,prev:y,next:g}}},r=e.withScopeId("data-v-3777f20e");e.pushScopeId("data-v-3777f20e");const c=e.createVNode("div",{class:"slider-loading"},[e.createVNode("div",{class:"ball-pulse"},[e.createVNode("div"),e.createVNode("div"),e.createVNode("div")])],-1),d={ref:"touchAreaRef",class:"slider-items"},u=e.createVNode("i",{class:"slider-icon slider-icon-left","aria-hidden":"true"},null,-1),p=e.createVNode("i",{class:"slider-icon slider-icon-right","aria-hidden":"true"},null,-1);e.popScopeId();const m=r(((t,i,n,s,o,l)=>(e.openBlock(),e.createBlock("div",{style:{width:n.width,height:n.height},class:"slider",onMouseenter:i[4]||(i[4]=(...t)=>s.handleMouseenter&&s.handleMouseenter(...t)),onMouseleave:i[5]||(i[5]=(...t)=>s.handleMouseleave&&s.handleMouseleave(...t))},[s.sliderItems.length?e.createCommentVNode("",!0):e.renderSlot(t.$slots,"loading",{key:0},(()=>[c]),{},!0),e.createVNode("div",d,[e.renderSlot(t.$slots,"default",{},void 0,!0)],512),n.indicators?(e.openBlock(),e.createBlock("div",{key:1,class:`slider-indicators slider-indicators-${n.indicators}`,onClick:i[1]||(i[1]=e.withModifiers((()=>{}),["stop"]))},[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(s.sliderItems.length,(t=>(e.openBlock(),e.createBlock("span",{key:t,class:[{"slider-indicator-active":s.currentIndex===t-1},"slider-indicator-icon"],onClick:e=>s.handleIndicator(t-s.currentIndex-1)},null,10,["onClick"])))),128))],2)):e.createCommentVNode("",!0),n.controlBtn?(e.openBlock(),e.createBlock(e.Fragment,{key:2},[e.createVNode("button",{type:"button",class:"slider-btn slider-btn-left","aria-label":n.prevBtnLabel,onClick:i[2]||(i[2]=e.withModifiers(((...t)=>s.prev&&s.prev(...t)),["stop"]))},[u],8,["aria-label"]),e.createVNode("button",{type:"button",class:"slider-btn slider-btn-right","aria-label":n.nextBtnLabel,onClick:i[3]||(i[3]=e.withModifiers(((...t)=>s.next&&s.next(...t)),["stop"]))},[p],8,["aria-label"])],64)):e.createCommentVNode("",!0)],36))));h.render=m,h.__scopeId="data-v-3777f20e";const f={name:"SliderItem",setup(){const t=e.reactive({display:!1,isInited:!1,initAnimation:!1,direction:!1,animation:"normal",speed:500,zIndex:99}),i=e.inject("slider-api");const n={init:function(){t.isInited||(t.isInited=!0,t.display=!0,t.initAnimation=!0,e.nextTick((()=>t.initAnimation=!1)))},show:function(i){t.zIndex=99,t.direction=i,e.nextTick((()=>t.display=!0))},hide:function(i){t.zIndex=98,t.direction=i,e.nextTick((()=>t.display=!1))}};return e.onBeforeMount((()=>{i.register(n),t.speed=i.speed.value||500,t.animation=i.animation.value||"normal"})),e.onBeforeUnmount((()=>{i.deregister(n)})),{initAnimation:e.computed((()=>t.initAnimation)),animation:e.computed((()=>t.animation)),direction:e.computed((()=>t.direction)),display:e.computed((()=>t.display)),zIndex:e.computed((()=>t.zIndex)),speed:e.computed((()=>t.speed))}}},v=e.withScopeId("data-v-1d163fbe"),T=v(((t,i,n,s,o,l)=>(e.openBlock(),e.createBlock(e.Transition,{name:s.initAnimation?"":`${s.animation}-${s.direction?"left":"right"}`},{default:v((()=>[e.withDirectives(e.createVNode("div",e.mergeProps(t.$attrs,{style:{zIndex:s.zIndex,transition:`all ${s.speed/1e3}s`},class:"slider-item"}),[e.renderSlot(t.$slots,"default",{},void 0,!0)],16),[[e.vShow,s.display]])])),_:3},8,["name"]))));f.render=T,f.__scopeId="data-v-1d163fbe",t.Slider=h,t.SliderItem=f,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module"}));
